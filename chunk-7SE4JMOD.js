import{a as B,b as S,c as Q,d as U,f as J,g as K,h as X,i as Z,j as ee,k as te,l as ne,m as ie,n as oe,o as se}from"./chunk-VEVOW575.js";import{b as ae}from"./chunk-SD56TBRJ.js";import{a as Y}from"./chunk-JECU2FWR.js";import{h as W,j as $}from"./chunk-6RMNFVTM.js";import{$ as g,$a as u,Ca as l,Eb as H,Jb as G,Ka as y,Pa as N,Ta as _,Wb as L,Xb as q,_ as p,_b as R,a as E,ab as i,b as F,bb as o,cb as h,e as T,fb as I,gb as D,hb as x,ib as f,jb as d,lb as V,mb as z,nb as A,ob as j,pb as O,qb as v,sb as r,tb as M,ub as w}from"./chunk-IBNF2MKV.js";var le=["sessionNameInput"];function de(s,a){if(s&1&&(i(0,"div",31)(1,"strong"),r(2,"Error:"),o(),r(3),o()),s&2){let e=d();l(3),w(" ",e.sessionFormErrors.api," ")}}function ce(s,a){if(s&1){let e=x();I(0),i(1,"div",32)(2,"button",33),f("click",function(){p(e);let t=d();return g(t.goToEdit())}),i(3,"span",34),r(4,"edit"),o()(),i(5,"button",35),f("click",function(){p(e);let t=d();return g(t.playSession())}),i(6,"span",36),r(7,"play_circle_filled"),o()(),i(8,"button",37),f("click",function(){p(e);let t=d();return g(t.deleteCurrent())}),i(9,"span",34),r(10,"delete"),o()()(),i(11,"div",38)(12,"div",39)(13,"span",40),r(14,"play_arrow"),o(),i(15,"div")(16,"h3",41),r(17),o()()(),i(18,"div",42)(19,"span",43),r(20,"timer"),o(),i(21,"div",44),r(22),o()()(),D()}if(s&2){let e,n=d();l(17),M(((e=n.form.get("sessionName"))==null?null:e.value)||"Untitled Session"),l(5),M(n.viewTotalDurationSeconds()>0?n.formatDuration(n.viewTotalDurationSeconds()):"Untimed")}}function me(s,a){if(s&1&&(i(0,"div",45)(1,"h2",46),r(2),o(),i(3,"p",47),r(4,"Create a new study session or update an existing one"),o()()),s&2){let e=d();l(2),M(e.editingIndex===null?"Add Session":"Edit Session")}}function ue(s,a){if(s&1&&(i(0,"div",54),r(1),o()),s&2){let e=d(2);l(),w(" ",e.sessionFormErrors.sessionName," ")}}function pe(s,a){s&1&&(i(0,"div",55),r(1," Session name is required "),o())}function ge(s,a){if(s&1&&(i(0,"div",48)(1,"div",9)(2,"label",49),r(3,"Session Name "),i(4,"span",50),r(5,"*"),o()(),h(6,"input",51,1),_(8,ue,2,1,"div",52)(9,pe,2,0,"div",53),o()()),s&2){let e,n,t=d();l(6),v("is-invalid",((e=t.form.get("sessionName"))==null?null:e.invalid)&&((e=t.form.get("sessionName"))==null?null:e.touched)||!!t.sessionFormErrors.sessionName),l(2),u("ngIf",t.sessionFormErrors.sessionName),l(),u("ngIf",((n=t.form.get("sessionName"))==null?null:n.invalid)&&((n=t.form.get("sessionName"))==null?null:n.touched)&&!t.sessionFormErrors.sessionName)}}function fe(s,a){if(s&1){let e=x();i(0,"button",56),f("click",function(){p(e);let t=d();return g(t.openTaskModal())}),i(1,"span",57),r(2,"add"),o()()}}function be(s,a){s&1&&(i(0,"div",58)(1,"p",59),r(2,"No tasks added yet. Click the + button to create your first task."),o()())}function _e(s,a){if(s&1){let e=x();i(0,"div",71)(1,"button",72),f("click",function(){p(e);let t=d().index,m=d(2);return g(m.openTaskModal(t))}),i(2,"span",73),r(3,"edit"),o()(),i(4,"button",74),f("click",function(){p(e);let t=d().index,m=d(2);return g(m.deleteTask(t))}),i(5,"span",73),r(6,"delete"),o()()()}}function xe(s,a){if(s&1&&(i(0,"div",78)(1,"span",79),r(2),o(),i(3,"span",80),r(4),o()()),s&2){let e,n,t=a.$implicit,m=d(4);l(2),w("\u2014 ",((e=t.get("subtaskName"))==null?null:e.value)||"Untitled"),l(2),M(m.formatDuration(((n=t.get("duration"))==null?null:n.value)||0))}}function ke(s,a){if(s&1&&(i(0,"div",75)(1,"h6",76),r(2,"Subtasks"),o(),_(3,xe,5,2,"div",77),o()),s&2){let e=d().index,n=d(2);l(3),u("ngForOf",n.getSubtasksControls(e))}}function he(s,a){if(s&1&&(i(0,"div",62)(1,"div",63)(2,"div",64)(3,"h5",65),r(4),o(),_(5,_e,7,0,"div",66),o(),i(6,"div",67)(7,"span",68),r(8,"Task Duration"),o(),i(9,"strong",69),r(10),o()(),_(11,ke,4,1,"div",70),o()()),s&2){let e,n,t=a.$implicit,m=a.index,c=d(2);l(4),M((e=t.get("taskName"))==null?null:e.value),l(),u("ngIf",!c.isViewMode),l(5),M(c.formatDuration(c.taskGroupDuration(t))),l(),u("ngIf",((n=t.get("hasSubtasks"))==null?null:n.value)&&c.getSubtasksControls(m).length>0)}}function ve(s,a){if(s&1&&(i(0,"div")(1,"div",60),_(2,he,12,4,"div",61),o()()),s&2){let e=d();l(2),u("ngForOf",e.tasks.controls)}}function Ce(s,a){if(s&1){let e=x();i(0,"div",81)(1,"button",82),r(2,"Save Session"),o(),i(3,"button",83),f("click",function(){p(e);let t=d();return g(t.cancel())}),r(4,"Cancel"),o()()}}function Me(s,a){if(s&1&&(i(0,"div",54),r(1),o()),s&2){let e=d(2);l(),w(" ",e.taskModalErrors.taskName," ")}}function Se(s,a){s&1&&(i(0,"div",55),r(1," Task name is required "),o())}function we(s,a){if(s&1&&(i(0,"div",54),r(1),o()),s&2){let e=d(3);l(),w(" ",e.taskModalErrors.duration," ")}}function ye(s,a){if(s&1&&(i(0,"div",95)(1,"label",106),r(2,"Duration "),i(3,"span",50),r(4,"*"),o()(),i(5,"div",18)(6,"div",19),h(7,"input",107),i(8,"label",108),r(9,"Hours"),o()(),i(10,"div",19),h(11,"input",109),i(12,"label",110),r(13,"Minutes"),o()(),i(14,"div",19),h(15,"input",111),i(16,"label",112),r(17,"Seconds"),o()()(),_(18,we,2,1,"div",52),o()),s&2){let e=d(2);l(18),u("ngIf",e.taskModalErrors.duration)}}function Oe(s,a){if(s&1&&(i(0,"div",54),r(1),o()),s&2){let e=d(3);l(),w(" ",e.taskModalErrors.subtasks," ")}}function Pe(s,a){if(s&1){let e=x();i(0,"div",91)(1,"div",117)(2,"div",118)(3,"div",119)(4,"strong",120),r(5),o(),i(6,"div",121),r(7),o()(),i(8,"div",122)(9,"button",72),f("click",function(){let t=p(e).index,m=d(3);return g(m.openSubtaskModal(t))}),i(10,"span",73),r(11,"edit"),o()(),i(12,"button",74),f("click",function(){let t=p(e).index,m=d(3);return g(m.removeSubtaskInModal(t))}),i(13,"span",73),r(14,"delete"),o()()()()()()}if(s&2){let e,n,t=a.$implicit,m=d(3);u("formGroup",m.controlAsGroup(t)),l(5),M(((e=t.get("subtaskName"))==null?null:e.value)||"Untitled Subtask"),l(2),M(m.formatDuration(((n=t.get("duration"))==null?null:n.value)||0))}}function Ee(s,a){if(s&1){let e=x();i(0,"div")(1,"div",113)(2,"h6",114),r(3,"Subtasks"),o(),i(4,"button",56),f("click",function(){p(e);let t=d(2);return g(t.openSubtaskModal())}),i(5,"span",73),r(6,"add"),o()()(),_(7,Oe,2,1,"div",52)(8,Pe,15,3,"div",115),i(9,"div",116),r(10,"Total subtask duration: "),i(11,"span",69),r(12),o()()()}if(s&2){let e=d(2);l(7),u("ngIf",e.taskModalErrors.subtasks),l(),u("ngForOf",e.taskModalSubtasks.controls),l(4),M(e.formatDuration(e.taskModalTotalDuration))}}function Fe(s,a){if(s&1){let e=x();i(0,"div",84)(1,"div",85)(2,"div",86)(3,"div",87)(4,"h5",88),r(5),o(),i(6,"button",89),f("click",function(){p(e);let t=d();return g(t.closeTaskModal())}),o()(),i(7,"div",90)(8,"form",91)(9,"div",92),h(10,"input",93),i(11,"label",94),r(12,"Task Name "),i(13,"span",50),r(14,"*"),o()(),_(15,Me,2,1,"div",52)(16,Se,2,0,"div",53),o(),i(17,"div",95)(18,"label",96),r(19,"Subtasks?"),o(),i(20,"div")(21,"div",97),h(22,"input",98),i(23,"label",99),r(24,"Yes"),o()(),i(25,"div",97),h(26,"input",100),i(27,"label",101),r(28,"No"),o()()()(),_(29,ye,19,1,"div",102)(30,Ee,13,3,"div",14),o()(),i(31,"div",103)(32,"button",104),f("click",function(){p(e);let t=d();return g(t.saveTaskModal())}),r(33,"Save Task"),o(),i(34,"button",105),f("click",function(){p(e);let t=d();return g(t.closeTaskModal())}),r(35,"Cancel"),o()()()()()}if(s&2){let e,n,t,m,c=d();O("display",c.taskModalOpen?"block":"none"),v("show",c.taskModalOpen),l(5),M(c.editingTaskIndex===null?"Add Task":"Edit Task"),l(3),u("formGroup",c.taskModalForm),l(2),v("is-invalid",((e=c.taskModalForm.get("taskName"))==null?null:e.invalid)&&((e=c.taskModalForm.get("taskName"))==null?null:e.touched)||!!c.taskModalErrors.taskName),l(5),u("ngIf",c.taskModalErrors.taskName),l(),u("ngIf",((n=c.taskModalForm.get("taskName"))==null?null:n.invalid)&&((n=c.taskModalForm.get("taskName"))==null?null:n.touched)&&!c.taskModalErrors.taskName),l(6),u("value",!0),l(4),u("value",!1),l(3),u("ngIf",!((t=c.taskModalForm.get("hasSubtasks"))!=null&&t.value)),l(),u("ngIf",(m=c.taskModalForm.get("hasSubtasks"))==null?null:m.value)}}function Te(s,a){if(s&1){let e=x();i(0,"div",123),f("click",function(){p(e);let t=d();return g(t.closeTaskModal())}),o()}if(s&2){let e=d();v("show",e.taskModalOpen)}}function Ne(s,a){if(s&1&&(i(0,"div",54),r(1),o()),s&2){let e=d(2);l(),w(" ",e.subtaskModalErrors.subtaskName," ")}}function Ie(s,a){s&1&&(i(0,"div",55),r(1," Subtask name is required "),o())}function De(s,a){if(s&1&&(i(0,"div",54),r(1),o()),s&2){let e=d(2);l(),w(" ",e.subtaskModalErrors.duration," ")}}function Ve(s,a){if(s&1){let e=x();i(0,"div",84)(1,"div",85)(2,"div",86)(3,"div",87)(4,"h5",124),r(5),o(),i(6,"button",89),f("click",function(){p(e);let t=d();return g(t.closeSubtaskModal())}),o()(),i(7,"div",90)(8,"form",91)(9,"div",92),h(10,"input",125),i(11,"label",126),r(12,"Subtask Name "),i(13,"span",50),r(14,"*"),o()(),_(15,Ne,2,1,"div",52)(16,Ie,2,0,"div",53),o(),i(17,"div",95)(18,"label",106),r(19,"Duration "),i(20,"span",50),r(21,"*"),o()(),i(22,"div",18)(23,"div",19),h(24,"input",127),i(25,"label",128),r(26,"Hours"),o()(),i(27,"div",19),h(28,"input",129),i(29,"label",130),r(30,"Minutes"),o()(),i(31,"div",19),h(32,"input",131),i(33,"label",132),r(34,"Seconds"),o()()(),_(35,De,2,1,"div",52),o()()(),i(36,"div",103)(37,"button",104),f("click",function(){p(e);let t=d();return g(t.saveSubtaskModal())}),r(38,"Save"),o(),i(39,"button",105),f("click",function(){p(e);let t=d();return g(t.closeSubtaskModal())}),r(40,"Cancel"),o()()()()()}if(s&2){let e,n,t=d();O("display",t.subtaskModalOpen?"block":"none"),v("show",t.subtaskModalOpen),l(5),M(t.editingSubtaskIndex===null?"Add Subtask":"Edit Subtask"),l(3),u("formGroup",t.subtaskModalForm),l(2),v("is-invalid",((e=t.subtaskModalForm.get("subtaskName"))==null?null:e.invalid)&&((e=t.subtaskModalForm.get("subtaskName"))==null?null:e.touched)||!!t.subtaskModalErrors.subtaskName),l(5),u("ngIf",t.subtaskModalErrors.subtaskName),l(),u("ngIf",((n=t.subtaskModalForm.get("subtaskName"))==null?null:n.invalid)&&((n=t.subtaskModalForm.get("subtaskName"))==null?null:n.touched)&&!t.subtaskModalErrors.subtaskName),l(19),u("ngIf",t.subtaskModalErrors.duration)}}function ze(s,a){if(s&1){let e=x();i(0,"div",123),f("click",function(){p(e);let t=d();return g(t.closeSubtaskModal())}),o()}if(s&2){let e=d();v("show",e.subtaskModalOpen)}}function Ae(s,a){if(s&1){let e=x();i(0,"div",133)(1,"div",134)(2,"div",135)(3,"div",87)(4,"h5",136),r(5,"Delete Session?"),o(),i(6,"button",89),f("click",function(){p(e);let t=d();return g(t.cancelDeleteSession())}),o()(),i(7,"div",90)(8,"p",137),r(9,"Are you sure you want to delete this session? This action cannot be undone."),o()(),i(10,"div",138)(11,"button",139),f("click",function(){p(e);let t=d();return g(t.cancelDeleteSession())}),r(12,"Cancel"),o(),i(13,"button",140),f("click",function(){p(e);let t=d();return g(t.confirmDeleteSession())}),r(14,"Delete"),o()()()()()}if(s&2){let e=d();O("display",e.showDeleteSessionModal?"block":"none"),v("show",e.showDeleteSessionModal)}}function je(s,a){if(s&1){let e=x();i(0,"div",141),f("click",function(){p(e);let t=d();return g(t.cancelDeleteSession())}),o()}if(s&2){let e=d();v("show",e.showDeleteSessionModal)}}function He(s,a){if(s&1){let e=x();i(0,"div",133)(1,"div",134)(2,"div",135)(3,"div",87)(4,"h5",136),r(5,"Delete Task?"),o(),i(6,"button",89),f("click",function(){p(e);let t=d();return g(t.cancelDeleteTask())}),o()(),i(7,"div",90)(8,"p",137),r(9,"Are you sure you want to delete this task? This action cannot be undone."),o()(),i(10,"div",138)(11,"button",139),f("click",function(){p(e);let t=d();return g(t.cancelDeleteTask())}),r(12,"Cancel"),o(),i(13,"button",140),f("click",function(){p(e);let t=d();return g(t.confirmDeleteTask())}),r(14,"Delete"),o()()()()()}if(s&2){let e=d();O("display",e.showDeleteTaskModal?"block":"none"),v("show",e.showDeleteTaskModal)}}function Ge(s,a){if(s&1){let e=x();i(0,"div",141),f("click",function(){p(e);let t=d();return g(t.cancelDeleteTask())}),o()}if(s&2){let e=d();v("show",e.showDeleteTaskModal)}}function Le(s,a){if(s&1){let e=x();i(0,"div",141),f("click",function(){p(e);let t=d(2);return g(t.dismissLocalStorageWarning())}),o()}if(s&2){let e=d(2);v("show",e.showLocalStorageWarning)}}function qe(s,a){if(s&1){let e=x();i(0,"div",133)(1,"div",134)(2,"div",135)(3,"div",87)(4,"h5",136),r(5,"Notice"),o(),i(6,"button",89),f("click",function(){p(e);let t=d();return g(t.dismissLocalStorageWarning())}),o()(),i(7,"div",90)(8,"p",79),r(9,"You are not logged in. This session will be saved on this device only and may be lost if browser cache or memory is cleared."),o(),i(10,"p",137),r(11,"To save your sessions to your profile and access them from any device, please sign in."),o()(),i(12,"div",138)(13,"button",139),f("click",function(){p(e);let t=d();return g(t.dismissLocalStorageWarning())}),r(14,"Continue as Guest"),o(),i(15,"button",142),f("click",function(){p(e);let t=d();return g(t.goToLogin())}),r(16,"Sign In"),o()(),_(17,Le,1,2,"div",30),o()()()}if(s&2){let e=d();O("display",e.showLocalStorageWarning?"block":"none"),v("show",e.showLocalStorageWarning),l(17),u("ngIf",e.showLocalStorageWarning)}}var re=class s{constructor(a,e,n,t,m,c){this.sessionsService=a;this.fb=e;this.router=n;this.route=t;this.cdr=m;this.oauthService=c;this.form=this.fb.group({sessionName:["",[S.required,S.minLength(1)]],isTimed:[!0],totalDuration:[0],durationHours:[0],durationMinutes:[0],durationSeconds:[0],tasks:this.fb.array([])}),this.taskModalForm=this.fb.group({taskName:["",[S.required,S.minLength(1)]],hasSubtasks:[!1],taskDuration:[0],durationHours:[0],durationMinutes:[0],durationSeconds:[0],subtasks:this.fb.array([])}),this.subtaskModalForm=this.fb.group({subtaskName:["",[S.required,S.minLength(1)]],duration:[0],durationHours:[0],durationMinutes:[0],durationSeconds:[0]});let b=this.taskModalForm.get("taskDuration");b.setValidators([S.required,S.min(0)]),b.updateValueAndValidity({emitEvent:!1}),this.taskModalForm.get("hasSubtasks").valueChanges.subscribe(k=>{k?(b.disable({emitEvent:!1}),b.clearValidators(),b.updateValueAndValidity({emitEvent:!1})):(b.enable({emitEvent:!1}),b.setValidators([S.required,S.min(0)]),b.updateValueAndValidity({emitEvent:!1}))})}sessions=[];editingIndex=null;isViewMode=!1;form;taskModalOpen=!1;subtaskModalOpen=!1;editingTaskIndex=null;editingSubtaskIndex=null;showDeleteSessionModal=!1;showDeleteTaskModal=!1;taskToDelete=null;reopenTaskModalAfterSubtask=!1;taskModalForm;subtaskModalForm;subs=new T;loadedForEdit=!1;taskModalErrors={};subtaskModalErrors={};sessionFormErrors={};isLoggedIn=!1;showLocalStorageWarning=!1;sessionNameInput;ngOnInit(){this.isLoggedIn=this.oauthService.hasValidAccessToken(),this.subs.add(this.sessionsService.sessions$.subscribe(a=>{this.sessions=a,this.editingIndex!==null&&!this.loadedForEdit&&this.sessions[this.editingIndex]&&(this.loadForEdit(this.editingIndex),this.loadedForEdit=!0,this.isViewMode&&this.form.disable({emitEvent:!1}))})),this.subs.add(this.route.paramMap.subscribe(a=>{this.isViewMode=(this.route.snapshot.routeConfig?.path||"").includes("view");let e=a.get("id");if(e!==null){let n=Number(e);isNaN(n)||(this.editingIndex=n,this.sessions[n]&&!this.loadedForEdit&&(this.loadForEdit(n),this.loadedForEdit=!0,this.isViewMode&&this.form.disable({emitEvent:!1})))}})),this.sessionsService.refreshSessions()}ngOnDestroy(){this.subs.unsubscribe()}dismissLocalStorageWarning(){this.showLocalStorageWarning=!1}goToLogin(){this.showLocalStorageWarning=!1,this.router.navigate(["/login"])}get tasks(){return this.form.get("tasks")}addTask(a){let e=this.fb.array((a?.subtasks||[]).map(t=>this.fb.group({subtaskName:[t.subtaskName],duration:[t.duration]}))),n=this.fb.group({taskName:[a?.taskName||""],hasSubtasks:[a?.hasSubtasks??!1],taskDuration:[a?.taskDuration||0],subtasks:e});this.tasks.push(n)}getSubtasksControls(a){let e=this.tasks.at(a).get("subtasks");return e?e.controls:[]}openTaskModal(a){this.editingTaskIndex=typeof a=="number"?a:null;let e=this.taskModalForm,n=e.get("subtasks");for(;n.length;)n.removeAt(0);if(this.editingTaskIndex!==null){let t=this.tasks.at(this.editingTaskIndex).value,m=t.taskDuration||0,c=Math.floor(m/3600),b=Math.floor(m%3600/60),C=m%60;e.patchValue({taskName:t.taskName,hasSubtasks:!!t.hasSubtasks,taskDuration:t.taskDuration||0,durationHours:c,durationMinutes:b,durationSeconds:C}),(t.subtasks||[]).forEach(k=>n.push(this.fb.group({subtaskName:[k.subtaskName],duration:[k.duration]})))}else e.reset({taskName:"",hasSubtasks:!1,taskDuration:0,durationHours:0,durationMinutes:0,durationSeconds:0});this.taskModalOpen=!0,setTimeout(()=>{try{this.sessionNameInput?.nativeElement?.focus()}catch{}},0)}closeTaskModal(){this.taskModalOpen=!1,this.editingTaskIndex=null;let a=this.taskModalForm.get("subtasks");for(;a.length;)a.removeAt(0);this.taskModalErrors={}}saveTaskModal(){this.taskModalErrors={};let a=!!this.taskModalForm.get("hasSubtasks")?.value;if(a&&this.taskModalSubtasks.length===0){this.taskModalErrors.subtasks="Please add at least one subtask";return}if(!this.taskModalForm.get("taskName")?.value?.trim()){this.taskModalErrors.taskName="Task name is required";return}if(!a){let c=Number(this.taskModalForm.get("durationHours")?.value||0),b=Number(this.taskModalForm.get("durationMinutes")?.value||0),C=Number(this.taskModalForm.get("durationSeconds")?.value||0);if(c*3600+b*60+C===0){this.taskModalErrors.duration="Duration is required for tasks without subtasks";return}}for(let c=0;c<this.taskModalSubtasks.length;c++){let b=this.taskModalSubtasks.at(c),C=b.get("subtaskName")?.value,k=Number(b.get("duration")?.value||0);if(!C?.trim()){this.taskModalErrors[`subtask_${c}_name`]=`Subtask ${c+1}: Name is required`;return}if(k===0){this.taskModalErrors[`subtask_${c}_duration`]=`Subtask ${c+1}: Duration is required`;return}}if(this.taskModalForm.invalid)return;let n=this.taskModalForm.value,t=0;if(a)t=this.taskModalSubtasks.controls.reduce((c,b)=>c+Number(b.get("duration")?.value||0),0);else{let c=Number(n.durationHours)||0,b=Number(n.durationMinutes)||0,C=Number(n.durationSeconds)||0;t=c*3600+b*60+C}let m={taskName:n.taskName,hasSubtasks:a,taskDuration:t,subtasks:(n.subtasks||[]).map(c=>({subtaskName:c.subtaskName,duration:Number(c.duration)||0}))};if(this.editingTaskIndex===null)this.addTask(m);else{let c=this.tasks.at(this.editingTaskIndex);c.patchValue({taskName:m.taskName,hasSubtasks:m.hasSubtasks,taskDuration:m.taskDuration});let b=c.get("subtasks");for(;b.length;)b.removeAt(0);(m.subtasks||[]).forEach(C=>b.push(this.fb.group({subtaskName:[C.subtaskName],duration:[C.duration]})))}this.closeTaskModal()}get taskModalSubtasks(){return this.taskModalForm.get("subtasks")}openSubtaskModal(a){this.editingSubtaskIndex=typeof a=="number"?a:null;let e=this.taskModalSubtasks;if(this.editingSubtaskIndex!==null){let n=e.at(this.editingSubtaskIndex).value,t=n.duration||0,m=Math.floor(t/3600),c=Math.floor(t%3600/60),b=t%60;this.subtaskModalForm.patchValue({subtaskName:n.subtaskName,duration:n.duration,durationHours:m,durationMinutes:c,durationSeconds:b})}else this.subtaskModalForm.reset({subtaskName:"",duration:0,durationHours:0,durationMinutes:0,durationSeconds:0});this.reopenTaskModalAfterSubtask=this.taskModalOpen,this.taskModalOpen=!1,setTimeout(()=>{this.subtaskModalOpen=!0,this.cdr.detectChanges()},0)}closeSubtaskModal(){this.subtaskModalOpen=!1,this.editingSubtaskIndex=null,this.subtaskModalForm.reset({subtaskName:"",duration:0,durationHours:0,durationMinutes:0,durationSeconds:0}),this.subtaskModalErrors={},this.reopenTaskModalAfterSubtask&&setTimeout(()=>{this.taskModalOpen=!0,this.cdr.detectChanges()},0),this.reopenTaskModalAfterSubtask=!1}saveSubtaskModal(){if(this.subtaskModalErrors={},!this.subtaskModalForm.get("subtaskName")?.value?.trim()){this.subtaskModalErrors.subtaskName="Subtask name is required";return}let e=Number(this.subtaskModalForm.get("durationHours")?.value||0),n=Number(this.subtaskModalForm.get("durationMinutes")?.value||0),t=Number(this.subtaskModalForm.get("durationSeconds")?.value||0),m=e*3600+n*60+t;if(m===0){this.subtaskModalErrors.duration="Subtask duration is required";return}if(this.subtaskModalForm.invalid)return;let c=this.subtaskModalForm.value,b=this.taskModalSubtasks;this.editingSubtaskIndex===null?b.push(this.fb.group({subtaskName:[c.subtaskName],duration:[m]})):b.at(this.editingSubtaskIndex).patchValue({subtaskName:c.subtaskName,duration:m}),this.closeSubtaskModal()}viewTotalDurationSeconds(){return Number(this.form.get("totalDuration")?.value||0)}removeSubtaskInModal(a){this.taskModalSubtasks.removeAt(a)}get taskModalTotalDuration(){return this.taskModalSubtasks.controls.reduce((a,e)=>a+Number(e.get("duration")?.value||0),0)}get taskModalComputedDuration(){return!!this.taskModalForm.get("hasSubtasks")?.value?this.taskModalTotalDuration:Number(this.taskModalForm.get("taskDuration")?.value||0)}taskGroupDuration(a){if(!!a.get("hasSubtasks")?.value){let n=a.get("subtasks");return n?n.controls.reduce((t,m)=>t+Number(m.get("duration")?.value||0),0):0}return Number(a.get("taskDuration")?.value||0)}controlAsGroup(a){return a}formatDuration(a){let e=Math.floor(a/3600),n=Math.floor(a%3600/60),t=a%60;return`${e}h ${n}m ${t}s`}loadForEdit(a){let e=this.sessions[a];this.editingIndex=a;let n=e.totalDuration||0,t=Math.floor(n/3600),m=Math.floor(n%3600/60),c=n%60;for(this.form.patchValue({sessionName:e.sessionName,isTimed:e.isTimed,totalDuration:e.totalDuration||0,durationHours:t,durationMinutes:m,durationSeconds:c});this.tasks.length;)this.tasks.removeAt(0);e.tasks.forEach(b=>this.addTask(b))}async save(){if(this.sessionFormErrors={},this.isLoggedIn||(this.showLocalStorageWarning=!0),!this.form.get("sessionName")?.value?.trim()){this.sessionFormErrors.sessionName="Session name is required";return}let e=this.form.value,n=Number(e.durationHours)||0,t=Number(e.durationMinutes)||0,m=Number(e.durationSeconds)||0,c=n*3600+t*60+m,C={id:(this.editingIndex!==null&&this.editingIndex<this.sessions.length?this.sessions[this.editingIndex]:null)?.id,sessionName:e.sessionName,isTimed:!!e.isTimed,totalDuration:c>0?c:Number(e.totalDuration)||0,tasks:(e.tasks||[]).map(k=>({taskName:k.taskName,hasSubtasks:!!k.hasSubtasks,taskDuration:Number(k.taskDuration)||0,subtasks:(k.subtasks||[]).map(P=>({subtaskName:P.subtaskName,duration:Number(P.duration)||0}))}))};try{await this.sessionsService.saveSession(C,this.editingIndex??void 0),await this.sessionsService.refreshSessions(),this.router.navigate(["/sessions"])}catch(k){let P=this.resolveApiErrorMessage(k);this.sessionFormErrors=F(E({},this.sessionFormErrors),{api:P}),setTimeout(()=>{try{document.getElementById("session-api-error")?.scrollIntoView({behavior:"smooth",block:"center"})}catch{}},0);try{this.cdr.detectChanges()}catch{}console.error("Save failed:",k)}}cancel(){this.router.navigate(["/sessions"])}goToEdit(){this.editingIndex!==null&&this.router.navigate(["/sessions",this.editingIndex,"edit"])}deleteCurrent(){this.editingIndex!==null&&(this.taskModalOpen=!1,this.subtaskModalOpen=!1,setTimeout(()=>{this.showDeleteSessionModal=!0,this.cdr.detectChanges()},0))}async confirmDeleteSession(){if(this.editingIndex!==null)try{await this.sessionsService.deleteSession(this.editingIndex),this.showDeleteSessionModal=!1,this.router.navigate(["/sessions"])}catch(a){this.showDeleteSessionModal=!1;let e="Server issue: unable to delete right now. Please try again later.";this.sessionFormErrors=F(E({},this.sessionFormErrors),{api:e}),setTimeout(()=>{try{document.getElementById("session-api-error")?.scrollIntoView({behavior:"smooth",block:"center"})}catch{}},0);try{this.cdr.detectChanges()}catch{}console.error("Delete failed:",a)}}cancelDeleteSession(){this.showDeleteSessionModal=!1}deleteTask(a){this.taskToDelete=a,this.taskModalOpen=!1,this.subtaskModalOpen=!1,setTimeout(()=>{this.showDeleteTaskModal=!0,this.cdr.detectChanges()},0)}confirmDeleteTask(){this.taskToDelete!==null&&(this.tasks.removeAt(this.taskToDelete),this.taskToDelete=null),this.showDeleteTaskModal=!1}cancelDeleteTask(){this.showDeleteTaskModal=!1,this.taskToDelete=null}playSession(){this.editingIndex!==null&&this.router.navigate(["/sessions",this.editingIndex,"timer"])}resolveApiErrorMessage(a){let e=a?.error;if(typeof e=="string")try{let n=JSON.parse(e);if(n?.message)return n.message;if(n?.error_description)return n.error_description;if(n?.error)return n.error}catch{return e}if(e?.message)return e.message;if(e?.error?.message)return e.error.message;if(e?.detail)return e.detail;if(e?.title)return e.title;if(Array.isArray(e?.errors)&&e.errors.length)return e.errors.join("; ");if(e?.errors&&typeof e.errors=="object"){let n=Object.values(e.errors).flat().filter(Boolean).join("; ");if(n)return n}return a?.message?a.message:a?.status?`Request failed (${a.status})`:"Failed to save session. Please try again."}static \u0275fac=function(e){return new(e||s)(y(ae),y(ie),y($),y(W),y(G),y(Y))};static \u0275cmp=N({type:s,selectors:[["app-session-form"]],viewQuery:function(e,n){if(e&1&&V(le,5),e&2){let t;z(t=A())&&(n.sessionNameInput=t.first)}},decls:44,vars:18,consts:[["editHeader",""],["sessionNameInput",""],[1,"session-form"],[1,"container-lg","py-4"],["id","session-api-error","class","alert alert-danger mb-4","role","alert","aria-live","assertive",4,"ngIf"],[4,"ngIf","ngIfElse"],[3,"ngSubmit","formGroup"],["class","form-card mb-4",4,"ngIf"],[1,"form-card"],[1,"form-section"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[2,"font-size","1.15rem","font-weight","700","color","#0f172a","margin","0"],["type","button","class","add-task-circle","style","display: inline-flex; align-items: center; justify-content: center;",3,"click",4,"ngIf"],["class","text-center text-muted py-5",4,"ngIf"],[4,"ngIf"],[1,"form-section","mt-4","pt-4","border-top"],[1,"form-label","fw-bold","mb-3"],[1,"small","text-muted"],[1,"d-flex","gap-2","flex-nowrap"],[1,"form-floating",2,"flex","1"],["type","number","id","durationHours","formControlName","durationHours","placeholder","Hours",1,"form-control"],["for","durationHours"],["type","number","id","durationMinutes","formControlName","durationMinutes","placeholder","Minutes",1,"form-control"],["for","durationMinutes"],["type","number","id","durationSeconds","formControlName","durationSeconds","placeholder","Seconds",1,"form-control"],["for","durationSeconds"],["class","mt-5 d-flex gap-3 w-100",4,"ngIf"],["class","modal fade","tabindex","-1",3,"show","display",4,"ngIf"],["class","modal-backdrop fade",3,"show","click",4,"ngIf"],["class","modal fade","tabindex","-1","style","z-index:200000;",3,"show","display",4,"ngIf"],["class","modal-backdrop fade","style","z-index:199999;",3,"show","click",4,"ngIf"],["id","session-api-error","role","alert","aria-live","assertive",1,"alert","alert-danger","mb-4"],[1,"d-flex","justify-content-center","mb-4","summary-actions","gap-3"],["type","button","title","Edit",1,"btn","btn-link","p-2","text-secondary",3,"click"],[1,"material-icons",2,"font-size","26px"],["type","button","title","Play",1,"btn","btn-link","p-2","text-primary",3,"click"],[1,"material-icons",2,"font-size","30px"],["type","button","title","Delete",1,"btn","btn-link","p-2","text-danger",3,"click"],[1,"view-summary-card","mb-4","d-flex","justify-content-between","align-items-center"],[1,"d-flex","align-items-center","gap-3"],[1,"material-icons","text-primary",2,"font-size","30px"],[1,"mb-0",2,"font-size","1.3rem","font-weight","700"],[1,"d-flex","align-items-center","gap-2"],[1,"material-icons","text-timer",2,"font-size","22px"],[1,"fw-bold"],[1,"mb-4"],[1,"mb-1",2,"font-size","clamp(1.5rem, 3vw, 2rem)","font-weight","700","color","#0f172a"],[1,"text-muted","mb-0"],[1,"form-card","mb-4"],["for","sessionName",1,"form-label","fw-bold","mb-2"],[1,"text-danger"],["id","sessionName","formControlName","sessionName","placeholder","e.g., Constitutional Law Study",1,"form-control"],["class","invalid-feedback d-block",4,"ngIf"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback","d-block"],[1,"invalid-feedback"],["type","button",1,"add-task-circle",2,"display","inline-flex","align-items","center","justify-content","center",3,"click"],[1,"material-icons",2,"font-size","20px"],[1,"text-center","text-muted","py-5"],[1,"mb-0",2,"font-size","0.95rem"],[1,"row","g-3"],["class","col-12 col-md-6 col-lg-4",4,"ngFor","ngForOf"],[1,"col-12","col-md-6","col-lg-4"],[1,"task-card","h-100"],[1,"d-flex","justify-content-between","align-items-start","mb-3"],[1,"mb-0",2,"font-size","1.05rem","font-weight","700","color","#0f172a"],["class","d-flex gap-1",4,"ngIf"],[1,"d-flex","justify-content-between","mb-3"],[1,"text-muted",2,"font-size","0.9rem","font-weight","600"],[2,"color","#0b4bb4","font-weight","700"],["class","mt-3 pt-3 border-top",4,"ngIf"],[1,"d-flex","gap-1"],["type","button",1,"btn","btn-sm","btn-link","text-secondary","p-1",3,"click"],[1,"material-icons",2,"font-size","18px"],["type","button",1,"btn","btn-sm","btn-link","text-danger","p-1",3,"click"],[1,"mt-3","pt-3","border-top"],[1,"mb-2",2,"font-size","0.9rem","font-weight","700","color","#64748b","text-transform","uppercase","letter-spacing","0.5px"],["class","d-flex justify-content-between mb-2 ps-3","style","font-size: 0.9rem;",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","mb-2","ps-3",2,"font-size","0.9rem"],[2,"color","#475569"],[2,"color","#0b4bb4","font-weight","600"],[1,"mt-5","d-flex","gap-3","w-100"],["type","submit",1,"btn","btn-primary",2,"padding","0.75rem 1.5rem","font-weight","700","border-radius","10px","flex","1"],["type","button",1,"btn","btn-outline-secondary",2,"padding","0.75rem 1.5rem","font-weight","700","border-radius","10px","flex","1",3,"click"],["tabindex","-1",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","modal-card"],[1,"modal-header","border-0","pb-2"],[1,"modal-title",2,"font-weight","700","font-size","1.2rem","color","#0f172a"],["type","button",1,"btn-close",3,"click"],[1,"modal-body","pt-2"],[3,"formGroup"],[1,"form-floating","mb-3"],["id","taskName","formControlName","taskName","placeholder","e.g., Constitutional Amendments",1,"form-control"],["for","taskName"],[1,"mb-3"],[1,"form-label","fw-bold"],[1,"form-check","form-check-inline"],["type","radio","formControlName","hasSubtasks","id","hasSubYes",1,"form-check-input",3,"value"],["for","hasSubYes",1,"form-check-label"],["type","radio","formControlName","hasSubtasks","id","hasSubNo",1,"form-check-input",3,"value"],["for","hasSubNo",1,"form-check-label"],["class","mb-3",4,"ngIf"],[1,"modal-footer","d-flex","gap-3","border-0"],[1,"btn","btn-primary","flex-grow-1",2,"padding","0.6rem 1.2rem","font-weight","700","border-radius","10px",3,"click"],[1,"btn","btn-outline-secondary","flex-grow-1",2,"padding","0.6rem 1.2rem","font-weight","700","border-radius","10px",3,"click"],[1,"form-label","fw-bold","mb-2"],["type","number","id","taskDurationHours","formControlName","durationHours","placeholder","Hours","min","0",1,"form-control"],["for","taskDurationHours"],["type","number","id","taskDurationMinutes","formControlName","durationMinutes","placeholder","Minutes","min","0","max","59",1,"form-control"],["for","taskDurationMinutes"],["type","number","id","taskDurationSeconds","formControlName","durationSeconds","placeholder","Seconds","min","0","max","59",1,"form-control"],["for","taskDurationSeconds"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"mb-0",2,"font-weight","700","color","#0f172a"],[3,"formGroup",4,"ngFor","ngForOf"],[1,"small","text-muted","mt-3","pt-2","border-top",2,"font-size","0.85rem","font-weight","600"],[1,"task-card","mb-2","p-3"],[1,"d-flex","justify-content-between","align-items-center"],[1,"flex-grow-1"],[2,"font-size","0.95rem","color","#0f172a"],[1,"small","text-muted","mt-1",2,"font-size","0.85rem"],[1,"d-flex","align-items-center","gap-1"],[1,"modal-backdrop","fade",3,"click"],[1,"modal-title",2,"font-weight","700","font-size","1.1rem","color","#0f172a"],["id","subtaskName","formControlName","subtaskName","placeholder","e.g., Article 1-5",1,"form-control"],["for","subtaskName"],["type","number","id","subtaskDurationHours","formControlName","durationHours","placeholder","Hours","min","0",1,"form-control"],["for","subtaskDurationHours"],["type","number","id","subtaskDurationMinutes","formControlName","durationMinutes","placeholder","Minutes","min","0","max","59",1,"form-control"],["for","subtaskDurationMinutes"],["type","number","id","subtaskDurationSeconds","formControlName","durationSeconds","placeholder","Seconds","min","0","max","59",1,"form-control"],["for","subtaskDurationSeconds"],["tabindex","-1",1,"modal","fade",2,"z-index","200000"],["role","dialog","aria-modal","true",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","modal-card",2,"z-index","200001"],[1,"modal-title",2,"font-weight","700","color","#0f172a"],[1,"mb-0",2,"color","#475569"],[1,"modal-footer","border-0","d-flex","gap-3"],["type","button",1,"btn","btn-outline-secondary","flex-grow-1",2,"padding","0.6rem 1.2rem","font-weight","700","border-radius","10px",3,"click"],["type","button",1,"btn","btn-danger","flex-grow-1",2,"padding","0.6rem 1.2rem","font-weight","700","border-radius","10px",3,"click"],[1,"modal-backdrop","fade",2,"z-index","199999",3,"click"],["type","button",1,"btn","btn-primary","flex-grow-1",2,"padding","0.6rem 1.2rem","font-weight","700","border-radius","10px",3,"click"]],template:function(e,n){if(e&1){let t=x();i(0,"div",2)(1,"div",3),_(2,de,4,1,"div",4)(3,ce,23,2,"ng-container",5)(4,me,5,1,"ng-template",null,0,H),i(6,"form",6),f("ngSubmit",function(){return p(t),g(n.save())}),_(7,ge,10,4,"div",7),i(8,"div",8)(9,"div",9)(10,"div",10)(11,"h4",11),r(12,"Tasks in Session"),o(),_(13,fe,3,0,"button",12),o(),_(14,be,3,0,"div",13)(15,ve,3,1,"div",14),o()(),i(16,"div",15)(17,"label",16),r(18,"Session Duration "),i(19,"span",17),r(20,"(optional)"),o()(),i(21,"div",18)(22,"div",19),h(23,"input",20),i(24,"label",21),r(25,"Hours"),o()(),i(26,"div",19),h(27,"input",22),i(28,"label",23),r(29,"Minutes"),o()(),i(30,"div",19),h(31,"input",24),i(32,"label",25),r(33,"Seconds"),o()()()(),_(34,Ce,5,0,"div",26),o()(),_(35,Fe,36,14,"div",27)(36,Te,1,2,"div",28)(37,Ve,41,11,"div",27)(38,ze,1,2,"div",28)(39,Ae,15,4,"div",29)(40,je,1,2,"div",30)(41,He,15,4,"div",29)(42,Ge,1,2,"div",30)(43,qe,18,5,"div",29),o()}if(e&2){let t=j(5);l(2),u("ngIf",n.sessionFormErrors.api),l(),u("ngIf",n.isViewMode)("ngIfElse",t),l(3),u("formGroup",n.form),l(),u("ngIf",!n.isViewMode),l(6),u("ngIf",!n.isViewMode),l(),u("ngIf",!n.isViewMode&&n.tasks.controls.length===0),l(),u("ngIf",n.tasks.controls.length>0),l(19),u("ngIf",!n.isViewMode),l(),u("ngIf",n.taskModalOpen),l(),u("ngIf",n.taskModalOpen),l(),u("ngIf",n.subtaskModalOpen),l(),u("ngIf",n.subtaskModalOpen),l(),u("ngIf",n.showDeleteSessionModal),l(),u("ngIf",n.showDeleteSessionModal),l(),u("ngIf",n.showDeleteTaskModal),l(),u("ngIf",n.showDeleteTaskModal),l(),u("ngIf",n.showLocalStorageWarning)}},dependencies:[R,L,q,oe,J,B,K,X,Q,U,ne,te,se,ee,Z],styles:[".sessions-page[_ngcontent-%COMP%]{padding:3rem 1rem 6rem;background:linear-gradient(180deg,#fff,#f8fbff,#eef2ff);color:#0f172a;min-height:100vh}.sessions-page[_ngcontent-%COMP%]   .actions-bar[_ngcontent-%COMP%]{flex-wrap:nowrap}.sessions-page[_ngcontent-%COMP%]   .actions-bar[_ngcontent-%COMP%]   .search-holder[_ngcontent-%COMP%]{min-width:0}.sessions-page[_ngcontent-%COMP%]   .search-full[_ngcontent-%COMP%]{display:flex;align-items:center;background:#fff;border-radius:12px;padding:10px 14px;border:1px solid #e2e8f0;box-shadow:0 2px 8px #0f172a0f;transition:all .18s ease}.sessions-page[_ngcontent-%COMP%]   .search-full[_ngcontent-%COMP%]:focus-within{border-color:#0b4bb4;box-shadow:0 4px 12px #0b4bb41f}.sessions-page[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{font-size:20px;margin-right:10px;color:#64748b}.sessions-page[_ngcontent-%COMP%]   .search-full[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;box-shadow:none;padding:6px 0;background:transparent;color:#0f172a;font-weight:500}.sessions-page[_ngcontent-%COMP%]   .search-full[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#94a3b8}.sessions-page[_ngcontent-%COMP%]   .session-card[_ngcontent-%COMP%]{background:#fff;border-radius:14px;padding:18px;border:1px solid rgba(16,24,40,.06);box-shadow:0 10px 24px #0f172a14;display:flex;flex-direction:column;min-height:120px;position:relative;transition:transform .18s ease,box-shadow .18s ease,border-color .18s ease,background-color .18s ease}.sessions-page[_ngcontent-%COMP%]   .session-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 14px 32px #0b4bb426;border-color:#cbd5e1}.sessions-page[_ngcontent-%COMP%]   .card-inner[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.sessions-page[_ngcontent-%COMP%]   .session-title[_ngcontent-%COMP%]{font-weight:700;font-size:1.1rem;color:#0f172a;letter-spacing:.5px}.sessions-page[_ngcontent-%COMP%]   .duration[_ngcontent-%COMP%]{display:flex;align-items:center;color:#475569;font-weight:600;font-size:.95rem}.sessions-page[_ngcontent-%COMP%]   .duration-text[_ngcontent-%COMP%]{font-weight:600}.sessions-page[_ngcontent-%COMP%]   .text-timer[_ngcontent-%COMP%]{color:#0b4bb4;font-weight:700}.sessions-page[_ngcontent-%COMP%]   .subtle-text[_ngcontent-%COMP%]{color:#475569;font-weight:600}.sessions-page[_ngcontent-%COMP%]   .meta-row[_ngcontent-%COMP%]{color:#64748b;font-size:.93rem}.sessions-page[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:12px;border:none;background:linear-gradient(135deg,#0b4bb4,#0856d6);display:flex;align-items:center;justify-content:center;padding:0;color:#fff;box-shadow:0 8px 20px #0b4bb43d;transition:transform .18s ease,box-shadow .18s ease}.sessions-page[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 12px 28px #0b4bb452}.sessions-page[_ngcontent-%COMP%]   .fab[_ngcontent-%COMP%]{position:fixed;right:20px;bottom:20px;width:64px;height:64px;border-radius:16px;background:linear-gradient(135deg,#0b4bb4,#0856d6);border:none;font-size:28px;color:#fff;box-shadow:0 12px 28px #0b4bb447;display:flex;align-items:center;justify-content:center;transition:all .18s ease;cursor:pointer}.sessions-page[_ngcontent-%COMP%]   .fab[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 16px 36px #0b4bb45c}@media(min-width:768px){.sessions-page[_ngcontent-%COMP%]   .fab[_ngcontent-%COMP%]{display:none}}.sessions-page[_ngcontent-%COMP%]   .form-wrapper[_ngcontent-%COMP%]{padding-top:12px}.sessions-page[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]{background:#fff;border-radius:14px;padding:24px;box-shadow:0 10px 24px #0f172a14;border:1px solid rgba(16,24,40,.06)}.sessions-page[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]{margin-bottom:24px}.sessions-page[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]:last-child{margin-bottom:0}.sessions-page[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .form-title[_ngcontent-%COMP%]{font-size:clamp(1.3rem,2.5vw,1.5rem);padding:12px 0;border-radius:8px;color:#0f172a;font-weight:700}.sessions-page[_ngcontent-%COMP%]   .modal-card[_ngcontent-%COMP%]{background:#fff;border-radius:14px;padding:20px;width:min(720px,96%);box-shadow:0 18px 46px #0f172a33;border:1px solid rgba(16,24,40,.06)}.sessions-page[_ngcontent-%COMP%]   .modal-card.small[_ngcontent-%COMP%]{width:min(420px,92%)}.sessions-page[_ngcontent-%COMP%]   .modal-card[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .sessions-page[_ngcontent-%COMP%]   .modal-card[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin-bottom:12px;color:#0f172a;font-weight:700}.sessions-page[_ngcontent-%COMP%]   .subtask-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:8px 0}.sessions-page[_ngcontent-%COMP%]   .sub-left[_ngcontent-%COMP%]{color:#1e293b;font-weight:600}.sessions-page[_ngcontent-%COMP%]   .sub-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.sessions-page[_ngcontent-%COMP%]   .tasks-section[_ngcontent-%COMP%]   .add-task-circle[_ngcontent-%COMP%]{width:48px!important;height:48px!important;min-width:48px!important;min-height:48px!important;border-radius:50%!important;background:linear-gradient(135deg,#0b4bb4,#0856d6)!important;color:#fff!important;border:none!important;display:flex!important;align-items:center!important;justify-content:center!important;padding:0!important;font-size:20px;transition:all .18s ease;box-shadow:0 8px 20px #0b4bb43d;cursor:pointer}.sessions-page[_ngcontent-%COMP%]   .tasks-section[_ngcontent-%COMP%]   .add-task-circle[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 12px 28px #0b4bb452}.sessions-page[_ngcontent-%COMP%]   .tasks-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}.sessions-page[_ngcontent-%COMP%]   .session-form[_ngcontent-%COMP%]   .d-flex.gap-3[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]{min-width:0}@media(max-width:767.98px){.sessions-page[_ngcontent-%COMP%]{padding:2rem 1rem 6rem}.sessions-page[_ngcontent-%COMP%]   .session-title[_ngcontent-%COMP%]{font-size:1.05rem}.sessions-page[_ngcontent-%COMP%]   .session-card[_ngcontent-%COMP%]{padding:16px;min-height:90px}.sessions-page[_ngcontent-%COMP%]   .session-form[_ngcontent-%COMP%]   .d-flex.gap-3[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]{flex:1 1 auto;min-width:0}.sessions-page[_ngcontent-%COMP%]   .session-card[_ngcontent-%COMP%]   .card-inner[_ngcontent-%COMP%]{gap:8px}.sessions-page[_ngcontent-%COMP%]   .search-full[_ngcontent-%COMP%]{padding:10px 12px}.sessions-page[_ngcontent-%COMP%]   .fab[_ngcontent-%COMP%]{right:16px;bottom:16px}}@media(max-width:575.98px){.sessions-page[_ngcontent-%COMP%]{padding:1.5rem .75rem 6rem}.sessions-page[_ngcontent-%COMP%]   .session-card[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]{display:none}.sessions-page[_ngcontent-%COMP%]   .session-card[_ngcontent-%COMP%]   .card-inner[_ngcontent-%COMP%]{align-items:center;text-align:center;gap:10px}.sessions-page[_ngcontent-%COMP%]   .session-card[_ngcontent-%COMP%]   .card-inner[_ngcontent-%COMP%] > .d-flex[_ngcontent-%COMP%]{justify-content:center}.sessions-page[_ngcontent-%COMP%]   .session-card[_ngcontent-%COMP%]   .session-title[_ngcontent-%COMP%]{text-align:center}.sessions-page[_ngcontent-%COMP%]   .session-card[_ngcontent-%COMP%]   .duration[_ngcontent-%COMP%]{justify-content:center;gap:8px}}.summary-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{transition:all .18s ease;color:#0b4bb4;font-weight:600}.summary-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);color:#0856d6}.view-summary-card[_ngcontent-%COMP%]{background:#fff;border:1px solid rgba(16,24,40,.06);border-radius:14px;padding:20px 24px;box-shadow:0 10px 24px #0f172a14;transition:all .18s ease}.view-summary-card[_ngcontent-%COMP%]:hover{box-shadow:0 14px 32px #0b4bb41f;border-color:#cbd5e1}.task-card[_ngcontent-%COMP%]{background:#fff;border-radius:14px;padding:18px 20px;margin-bottom:12px;border:1px solid rgba(16,24,40,.06);box-shadow:0 10px 24px #0f172a14;transition:all .18s ease}.task-card[_ngcontent-%COMP%]:hover{box-shadow:0 14px 32px #0b4bb41f;border-color:#cbd5e1}.task-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.task-left[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.task-title[_ngcontent-%COMP%]{font-weight:700;color:#0f172a;font-size:1.05rem}.task-meta[_ngcontent-%COMP%]{color:#64748b;font-size:.9rem;font-weight:500}.task-ops[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0 6px}.subtask-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;color:#334155;padding:6px 0}.sub-dur[_ngcontent-%COMP%]{color:#2563eb;font-weight:600}.session-timer-page[_ngcontent-%COMP%]{max-width:720px;margin:0 auto}.timer-card[_ngcontent-%COMP%]{background:#e8e4f0;border-radius:20px;padding:24px;box-shadow:0 12px 28px #0000001a}.session-timer-card[_ngcontent-%COMP%]{background:#e8e4f0}.timer-header[_ngcontent-%COMP%]   .timer-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#1f1f1f}.timer-display[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;text-align:center;letter-spacing:2px;transition:color .3s ease}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}10%,30%,50%,70%,90%{transform:translate(-5px)}20%,40%,60%,80%{transform:translate(5px)}}.timer-negative[_ngcontent-%COMP%]{color:#dc3545!important;animation:_ngcontent-%COMP%_shake .5s ease-in-out infinite}.session-timer-display[_ngcontent-%COMP%]{color:#1c6fda}.session-timer-page[_ngcontent-%COMP%]{padding:2rem 1rem 4rem;background:linear-gradient(180deg,#fff,#f8fbff,#eef2ff);min-height:100vh}.timer-card[_ngcontent-%COMP%]{background:#fff;border:1px solid rgba(16,24,40,.06);border-radius:14px;padding:24px;box-shadow:0 10px 24px #0f172a14;transition:all .18s ease}.timer-card[_ngcontent-%COMP%]:hover{box-shadow:0 14px 32px #0b4bb41f;border-color:#cbd5e1}.session-timer-card[_ngcontent-%COMP%]{margin-bottom:20px}.timer-header[_ngcontent-%COMP%]{margin-bottom:16px}.timer-title[_ngcontent-%COMP%]{font-size:clamp(1.3rem,2vw,1.5rem);font-weight:700;color:#0f172a;letter-spacing:.5px}.timer-display[_ngcontent-%COMP%]{font-size:clamp(2.5rem,6vw,4rem);font-weight:700;color:#0b4bb4;text-align:center;font-family:Courier New,monospace;letter-spacing:2px;line-height:1.2}.timer-display.timer-negative[_ngcontent-%COMP%]{color:#dc2626}.session-timer-display[_ngcontent-%COMP%]{font-size:clamp(3rem,10vw,5rem);margin:24px 0}.session-only[_ngcontent-%COMP%]{padding:40px 24px!important;min-height:320px;display:flex;flex-direction:column;justify-content:center;align-items:center}.session-only-timer[_ngcontent-%COMP%]{font-size:clamp(4rem,12vw,6rem)!important;letter-spacing:4px;margin-top:32px;margin-bottom:32px}.task-selection-card[_ngcontent-%COMP%]{background:#fff;border:1px solid rgba(16,24,40,.06);padding:24px}.task-selection-title[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;text-align:center;color:#0f172a;letter-spacing:.5px}.task-timer-display[_ngcontent-%COMP%]{color:#0b4bb4;font-size:clamp(2.5rem,5vw,3.5rem)!important;margin-top:16px;margin-bottom:16px}.task-select-card[_ngcontent-%COMP%]{background:#fff;border:1px solid rgba(16,24,40,.06);border-radius:12px;padding:16px;cursor:pointer;transition:all .18s ease;box-shadow:0 4px 12px #0f172a14}.task-select-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 20px #0b4bb41f;border-color:#cbd5e1}.task-select-card.selected[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0b4bb4,#0856d6);box-shadow:0 8px 20px #0b4bb447;border-color:#0b4bb4}.task-select-card.selected[_ngcontent-%COMP%]   .task-name[_ngcontent-%COMP%], .task-select-card.selected[_ngcontent-%COMP%]   .task-duration-display[_ngcontent-%COMP%]{color:#fff}.task-select-card[_ngcontent-%COMP%]   .task-name[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;color:#0b4bb4;margin-bottom:8px}.task-select-card[_ngcontent-%COMP%]   .task-duration-display[_ngcontent-%COMP%]{font-size:.9rem;color:#64748b;font-weight:600}.subtask-info[_ngcontent-%COMP%]{margin-top:20px;padding:16px;background:#f0f4ff;border-radius:12px;border:1px solid rgba(11,75,180,.1)}.subtask-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:20px;margin-bottom:16px}.subtask-column[_ngcontent-%COMP%]{flex:1;text-align:center}.subtask-label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:700;color:#64748b;margin-bottom:6px;text-transform:uppercase;letter-spacing:.5px}.subtask-name[_ngcontent-%COMP%]{font-size:1.05rem;font-weight:700;color:#0f172a;word-break:break-word;margin-bottom:4px}.subtask-duration[_ngcontent-%COMP%]{font-size:.85rem;color:#64748b;font-weight:600}.subtask-timer-display[_ngcontent-%COMP%]{color:#0b4bb4!important;font-size:3.2rem!important;margin-top:16px}.task-duration-info[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:8px;padding:12px 16px;background:#f0f4ff;border-radius:10px;border:1px solid rgba(11,75,180,.1)}.task-duration-label[_ngcontent-%COMP%]{font-size:.95rem;font-weight:600;color:#64748b}.task-duration-value[_ngcontent-%COMP%]{font-size:.95rem;font-weight:700;color:#0b4bb4}@media(max-width:768px){.session-timer-page[_ngcontent-%COMP%]{padding:1.5rem 1rem 4rem}.timer-card[_ngcontent-%COMP%]{padding:20px;margin-bottom:16px}.timer-title[_ngcontent-%COMP%]{font-size:1.2rem}.timer-display[_ngcontent-%COMP%]{font-size:2.5rem}.session-only[_ngcontent-%COMP%]{padding:32px 20px!important;min-height:280px}}@media(max-width:576px){.session-timer-page[_ngcontent-%COMP%]{padding:1rem .75rem 4rem}.timer-card[_ngcontent-%COMP%]{padding:16px;border-radius:12px}.timer-header[_ngcontent-%COMP%]{margin-bottom:12px}.timer-title[_ngcontent-%COMP%]{font-size:1.1rem}.timer-display[_ngcontent-%COMP%]{font-size:2rem;letter-spacing:1px}.session-only[_ngcontent-%COMP%]{padding:24px 16px!important;min-height:240px}.session-only-timer[_ngcontent-%COMP%]{font-size:3.5rem!important;margin-top:20px;margin-bottom:20px}.task-timer-display[_ngcontent-%COMP%]{font-size:2.2rem!important}.task-select-card[_ngcontent-%COMP%]{padding:12px;margin-bottom:8px}.task-name[_ngcontent-%COMP%]{font-size:.95rem}.subtask-row[_ngcontent-%COMP%]{gap:12px;margin-bottom:12px}.subtask-label[_ngcontent-%COMP%]{font-size:.8rem}.subtask-name[_ngcontent-%COMP%]{font-size:.95rem}.subtask-timer-display[_ngcontent-%COMP%]{font-size:2.2rem!important}}"]})};export{re as SessionFormComponent};
